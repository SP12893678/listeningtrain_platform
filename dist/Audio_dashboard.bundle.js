(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{724:function(t,e,a){var i=a(738);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(98).default)("493ccf32",i,!1,{})},737:function(t,e,a){"use strict";var i=a(724);a.n(i).a},738:function(t,e,a){(e=a(97)(!1)).push([t.i,"\n.jf-title[data-v-730dd5ba] {\r\n    font-size: 32px;\n}\r\n",""]),t.exports=e},755:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",[a("v-list-item-title",{staticClass:"jf-title pa-2"},[t._v("\n        聲音資源\n      ")])],1),t._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"聲音資源搜尋","data-v-step":"Audio-dashboard-search","single-line":"","hide-details":""},model:{value:t.audio_data_table.search,callback:function(e){t.$set(t.audio_data_table,"search",e)},expression:"audio_data_table.search"}}),t._v(" "),a("v-list-item-action",{staticClass:"ml-4 mb-0"},[a("v-btn",{attrs:{"data-v-step":"Audio-dashboard-add",text:""},on:{click:t.addAudio}},[a("v-icon",{attrs:{left:""}},[t._v("\n          mdi-music-note-plus\n        ")]),t._v("新增\n      ")],1)],1),t._v(" "),a("v-list-item-action",{staticClass:"mb-0"},[a("v-btn",{attrs:{color:"blue","data-v-step":"Audio-dashboard-edit",text:""},on:{click:function(e){return e.preventDefault(),t.editAudio(e)}}},[a("v-icon",{attrs:{left:""}},[t._v("\n          mdi-pencil\n        ")]),t._v("編輯\n      ")],1)],1),t._v(" "),a("v-list-item-action",{staticClass:"ml-0 mb-0"},[a("v-btn",{attrs:{color:"red","data-v-step":"Audio-dashboard-delete",text:""},on:{click:t.deleteAudioAsk}},[a("v-icon",{attrs:{left:""}},[t._v("\n          mdi-delete\n        ")]),t._v("刪除\n      ")],1)],1)],1),t._v(" "),a("v-divider"),t._v(" "),a("v-list-item",{staticClass:"mt-4",attrs:{"two-line":""}},[a("v-list-item-content",[a("v-skeleton-loader",{attrs:{loading:t.audio_data_table.loading,type:"table"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.audio_data_table.header,items:t.audio,loading:t.audio_data_table.loading,search:t.audio_data_table.search,"item-key":"name","data-v-step":"Audio-dashboard-audio-table","loading-text":"","show-select":"","multi-sort":""},scopedSlots:t._u([{key:"item.category",fn:function(e){var i=e.item;return t._l(i.category,(function(e){return a("v-chip",{key:i.audio_id+e,staticClass:"mr-2",attrs:{color:t.getCategoryColor(e),outlined:""}},[t._v("\n              "+t._s(e)+"\n            ")])}))}},{key:"item.sound",fn:function(e){var i=e.item;return[a("v-btn",{attrs:{icon:""},on:{click:function(e){return t.playAudio(i)}}},[a("v-icon",[t._v("mdi-volume-high")])],1)]}}]),model:{value:t.audio_data_table.selected,callback:function(e){t.$set(t.audio_data_table,"selected",e)},expression:"audio_data_table.selected"}})],1)],1)],1),t._v(" "),t.audio.length>0?a("v-bottom-sheet",{attrs:{inset:""},model:{value:t.audio_player_sheet.bottom_sheet,callback:function(e){t.$set(t.audio_player_sheet,"bottom_sheet",e)},expression:"audio_player_sheet.bottom_sheet"}},[a("v-card",{attrs:{tile:""}},[a("v-progress-linear",{staticClass:"my-0",attrs:{value:t.getPlayerProcess,height:"3"}}),t._v(" "),a("v-list",[a("v-list-item",[a("v-list-item-content",[a("v-list-item-title",[t._v("\n              "+t._s(t.audio[t.audio_player_sheet.player.index].name)+"\n            ")]),t._v(" "),a("v-list-item-subtitle",[t._v("\n              "+t._s(t.audio[t.audio_player_sheet.player.index].audio_id)+"\n            ")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("頻率")]),t._v(" "),a("v-list-item-subtitle",[t._v("\n              "+t._s(t.audio[t.audio_player_sheet.player.index].frequency)+"\n            ")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-title",[t._v("波形")]),t._v(" "),a("v-list-item-subtitle",[t._v("\n              "+t._s(t.audio[t.audio_player_sheet.player.index].waveform)+"\n            ")])],1),t._v(" "),a("v-list-item-content",[a("v-list-item-subtitle",t._l(t.audio[t.audio_player_sheet.player.index].category,(function(e){return a("v-chip",{key:e,staticClass:"mr-2",attrs:{color:t.getCategoryColor(e),outlined:"",small:""}},[t._v("\n                "+t._s(e)+"\n              ")])})),1)],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-list-item-icon",{staticClass:"mr-4"},[a("v-btn",{attrs:{icon:""},on:{click:t.previousAudio}},[a("v-icon",[t._v("mdi-rewind")])],1)],1),t._v(" "),a("v-list-item-icon",{staticClass:"ml-2 mr-2"},[t.audio_player_sheet.player.pause?t._e():a("v-btn",{attrs:{icon:""},on:{click:t.pauseAudio}},[a("v-icon",[t._v("mdi-pause")])],1),t._v(" "),t.audio_player_sheet.player.pause?a("v-btn",{attrs:{icon:""},on:{click:t.resumeAudio}},[a("v-icon",[t._v("mdi-play")])],1):t._e()],1),t._v(" "),a("v-list-item-icon",{staticClass:"ml-4"},[a("v-btn",{attrs:{icon:""},on:{click:t.nextAudio}},[a("v-icon",[t._v("mdi-fast-forward")])],1)],1)],1)],1)],1)],1):t._e(),t._v(" "),a("v-dialog",{attrs:{"max-width":"400",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("\n        你確定要刪除下列聲音資源?\n      ")]),t._v(" "),t.audio_data_table.selected.length>0?a("v-simple-table",{attrs:{height:t.getTableheight(),"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[t._v("\n                名稱\n              ")]),t._v(" "),a("th",{staticClass:"text-left"},[t._v("\n                代號\n              ")])])]),t._v(" "),a("tbody",t._l(t.audio_data_table.selected,(function(e){return a("tr",{key:e.audio_id},[a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.audio_id))])])})),0)]},proxy:!0}],null,!1,3282827445)}):t._e(),t._v(" "),a("v-card-text",[t._v("※如果確認刪除後，將無法在復原。")]),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          否\n        ")]),t._v(" "),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:t.deleteAudio}},[t._v("\n          是\n        ")])],1)],1)],1),t._v(" "),a("v-snackbar",{attrs:{timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.attrs;return[a("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.snackbar.body=!1}}},"v-btn",i,!1),[t._v("\n        Close\n      ")])]}}]),model:{value:t.snackbar.body,callback:function(e){t.$set(t.snackbar,"body",e)},expression:"snackbar.body"}},[t._v("\n    "+t._s(t.snackbar.text)+"\n    ")]),t._v(" "),a("v-tour",{attrs:{name:this.$route.name,steps:t.steps}})],1)};i._withStripped=!0;var o=a(6),n=a.n(o),s=a(13),r=a.n(s),d=a(16),l={data:function(){return{dialog:!1,audio:[],audio_categories:[],audio_data_table:{header:[{text:"名稱",align:"start",value:"name"},{text:"分類",value:"category"},{text:"頻率",value:"frequency"},{text:"波形",value:"waveform"},{text:"創建時間",value:"created_time"},{text:"聲音",value:"sound",sortable:!1}],selected:[],search:"",loading:!0},audio_player_sheet:{bottom_sheet:!1,player:{index:0,duration:0,currentTime:0,pause:!1},audio:new Audio},snackbar:{body:!1,text:null,timeout:2e3},steps:[{target:'[data-v-step="Audio-dashboard-audio-table"]',header:{title:"聲音資源資料表"},content:"將列出所擁有的聲音資源資料表，可於表中查看各項內容和屬性，在最右側有聲音撥放按鈕可聆聽該聲音，另外可於資料表標題欄點選該類別進行排序以便查看",params:{enableScrolling:!1}},{target:'[data-v-step="Audio-dashboard-search"]',header:{title:"聲音資源搜尋欄"},content:"透過輸入關鍵字將顯示與關鍵字相關的聲音資源",params:{enableScrolling:!1}},{target:'[data-v-step="Audio-dashboard-add"]',header:{title:"新增聲音資源按鈕"},content:"點選此按鈕將進入聲音資源編輯頁面。",params:{enableScrolling:!1}},{target:'[data-v-step="Audio-dashboard-edit"]',header:{title:"編輯聲音資源按鈕"},content:"勾選聲音資源資料表中欲刪除的聲音後，點選此按鈕將進入聲音資源編輯頁面。",params:{enableScrolling:!1}},{target:'[data-v-step="Audio-dashboard-delete"]',header:{title:"刪除聲音資源按鈕"},content:"勾選聲音資源資料表中欲刪除的聲音後，點選此按鈕即可刪除。",params:{enableScrolling:!1}}]}},computed:{getPlayerProcess:function(){return this.audio_player_sheet.player.currentTime/this.audio_player_sheet.player.duration*100}},mounted:function(){var t=this;return r()(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAudioData();case 2:t.audioPlayerEvent(),t.audio.forEach((function(t){t.category=t.category.split(";")})),a=t,t.audio.forEach((function(t){t.category.forEach((function(t){if(null==a.audio_categories.find((function(e){return e.name==t}))){var e=Math.round(255*Math.random()),i=Math.round(255*Math.random()),o=Math.round(255*Math.random()),n="rgba(".concat(e,", ").concat(i,", ").concat(o,", 1)"),s={name:t,color:n};a.audio_categories.push(s)}}))})),t.audio_data_table.loading=!1;case 7:case"end":return e.stop()}}),e)})))()},methods:{getAudioData:function(){var t=this;return Object(d.b)({type:"get",amount:"all"}).then((function(e){t.audio=e.data})).catch((function(t){console.error(t)}))},audioPlayerEvent:function(){var t=this,e=this;this.audio_player_sheet.audio.addEventListener("loadedmetadata",(function(){e.audio_player_sheet.player.duration=e.audio_player_sheet.audio.duration})),this.audio_player_sheet.audio.addEventListener("timeupdate",(function(){e.audio_player_sheet.player.currentTime=e.audio_player_sheet.audio.currentTime,e.audio_player_sheet.player.currentTime==e.audio_player_sheet.player.duration&&(t.audio_player_sheet.player.pause=!0)}),!1)},loadAudioResources:function(){},getCategoryColor:function(t){return 0!=this.audio_categories.length?this.audio_categories.find((function(e){return e.name==t})).color:"black"},playAudio:function(t){this.audio_player_sheet.player.index=this.audio.indexOf(t),this.audio_player_sheet.bottom_sheet=!0,this.audio_player_sheet.audio.src=t.sound_src,this.audio_player_sheet.audio.currentTime=0,this.audio_player_sheet.player.currentTime=0,this.audio_player_sheet.audio.play(),this.audio_player_sheet.player.pause=!1},pauseAudio:function(){this.audio_player_sheet.audio.pause(),this.audio_player_sheet.player.pause=!0},resumeAudio:function(){this.audio_player_sheet.audio.play(),this.audio_player_sheet.player.pause=!1},previousAudio:function(){this.pauseAudio(),this.audio_player_sheet.player.index=this.audio_player_sheet.player.index-1>=0?this.audio_player_sheet.player.index-1:this.audio.length-1,this.audio_player_sheet.audio.src=this.audio[this.audio_player_sheet.player.index].sound_src,this.audio_player_sheet.audio.play(),this.audio_player_sheet.player.pause=!1},nextAudio:function(){this.pauseAudio(),this.audio_player_sheet.player.index=this.audio_player_sheet.player.index+1<this.audio.length?this.audio_player_sheet.player.index+1:0,this.audio_player_sheet.audio.src=this.audio[this.audio_player_sheet.player.index].sound_src,this.audio_player_sheet.audio.play(),this.audio_player_sheet.player.pause=!1},editAudio:function(){if(this.audio_data_table.selected.length>0){var t={audio:{id:[]}};this.audio_data_table.selected.forEach((function(e){t.audio.id.push(e.id)})),this.$router.push({name:"audio-edit",params:{passdata:t}})}else this.snackbar.text="無選取任何聲音以編輯",this.snackbar.body=!0},addAudio:function(){this.$router.push({name:"audio-edit",params:{passdata:{audio:{id:[]}}}})},deleteAudioAsk:function(){this.audio_data_table.selected.length>0?this.dialog=!0:(this.snackbar.text="無選取任何聲音以刪除",this.snackbar.body=!0)},getTableheight:function(){return this.audio_data_table.selected.length<=5?48*(this.audio_data_table.selected.length+1):300},deleteAudio:function(){var t=this;return r()(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.audio_data_table.selected.map((function(t){return t.id})),e.next=3,Object(d.b)({type:"delete",items:a}).then((function(e){t.snackbar.text=e.data.result?"刪除成功":"刪除失敗",t.snackbar.body=!0,t.dialog=!1})).catch((function(t){console.error(t)}));case 3:return e.next=5,t.getAudioData();case 5:t.audio.forEach((function(t){t.category=t.category.split(";")})),t.audio.forEach((function(e){e.category.forEach((function(e){if(null==t.audio_categories.find((function(t){return t.name==e}))){var a=Math.round(255*Math.random()),i=Math.round(255*Math.random()),o=Math.round(255*Math.random()),n="rgba(".concat(a,", ").concat(i,", ").concat(o,", 1)"),s={name:e,color:n};t.audio_categories.push(s)}}))}));case 7:case"end":return e.stop()}}),e)})))()}}},u=(a(737),a(79)),c=Object(u.a)(l,i,[],!1,null,"730dd5ba",null);c.options.__file="src/components/manage/Audio-dashboard.vue";e.default=c.exports}}]);